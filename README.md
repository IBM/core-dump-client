# core-dump-containers
A CLI for running a core dump session on kubernetes using the zipfile generated by [core-dump-handler](https://github.com/IBM/core-dump-handler) 

# HIGHLY EXPERIMENTAL!

While this tool shouldn't destroy any data it's a bash script with little error handling to explore the problem space and will change significantly. 

## usage 

Ensure [core-dump-handler](https://github.com/IBM/core-dump-handler) is installed

Copy the bash script `cdc.sh` to your local machine

Create a debug environment with 
```
./cdc.sh [name-of-zipfile] [runtime] [exename] [crashed-image-name] [namespace]
```
e.g. 
```
./cdc.sh 36c0d272-3295-4474-a16e-00885ba04fed-dump-1631477784-crashing-app-848dc79df4-srqkv-node-8-4.zip nodejs node quay.io/number9/example-crashing-nodejs-app
node-debugger-e6fd2727-52d6-4657-9eab-8c95463e178b created
```

Login to the debug container
```
kubectl exec -it node-debugger-e6fd2727-52d6-4657-9eab-8c95463e178b -c debug-container -- /bin/bash 
```

In the container start a lldb session with the environment variables `$EXE_LOCATION` and `$CORE_LOCATION` as options 

```
lldb $EXE_LOCATION -c $CORE_LOCATION
```

## build status

### Default
**NA**
### Node.Js
[![Docker Repository on Quay](https://quay.io/repository/icdh/nodejs/status "Docker Repository on Quay")](https://quay.io/repository/icdh/nodejs)
### Java